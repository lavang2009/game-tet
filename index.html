<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>ğŸ® Lá»… Há»™i Game Táº¿t 2026 â€“ Menu (v5.3)</title>
<style>
/* CSS gá»n, giá»¯ giao diá»‡n Ä‘áº¹p */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  overflow:hidden;
  font-family:Segoe UI,system-ui,Arial;
  /* background will be set by JS to an image + overlay */
  background: linear-gradient(rgba(0,0,0,.35),rgba(0,0,0,.55)), url('') center/cover no-repeat fixed;
  color:#fff;
  transition: background-image .8s ease, background-color .4s ease;
}
.banner{position:fixed;top:0;width:100%;height:70px;background:linear-gradient(90deg,#ff1744,#ff9800,#ffd600);display:flex;align-items:center;justify-content:center;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,.3)}
#aiText{font-weight:700;font-size:clamp(14px,2.5vw,20px);color:#4a1200}
.cursor{width:2px;height:1em;background:#4a1200;margin-left:6px;animation:blink 1s infinite}
@keyframes blink{50%{opacity:0}}
.header{margin-top:90px;text-align:center}
.header h1{font-size:clamp(1.8em,4vw,3em);color:#ffd966;text-shadow:0 0 20px red,0 0 40px gold}
.countdown{margin-top:8px;color:#ffe082;font-weight:600}
.menu{position:absolute;bottom:170px;width:100%;display:flex;justify-content:center;gap:20px;padding:0 10px}
.game-card{width:240px;padding:22px;border-radius:22px;text-align:center;cursor:pointer;background:rgba(255,255,255,.12);backdrop-filter:blur(10px);box-shadow:0 0 30px rgba(255,200,0,.45);transition:.25s}
.game-card:hover{transform:translateY(-8px) scale(1.04)}
.game-card span{font-size:56px}
.game-card h2{color:#ffd54f;margin-top:8px}
.top-btn{position:fixed;right:15px;top:80px;display:flex;flex-direction:column;gap:10px;z-index:9999}
.top-btn button{width:46px;height:46px;border:none;border-radius:50%;background:gold;font-size:18px;cursor:pointer}
.toast{position:fixed;top:80px;left:50%;transform:translateX(-50%);background:linear-gradient(45deg,#ffcc00,#ff1744);color:#400;padding:10px 18px;border-radius:20px;font-weight:600;box-shadow:0 0 20px gold;z-index:9999}
.popup{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:9999}
.popup .box{background:#fff7e6;color:#600;padding:18px;border-radius:14px;max-width:520px;text-align:left}
#vol{position:fixed;right:18px;top:150px;z-index:9999;width:6px;height:90px;background:gold;border-radius:10px}
canvas{position:fixed;inset:0;pointer-events:none}
@media(max-width:768px){.menu{flex-direction:column;bottom:220px}}
.info-title{font-weight:700;color:#4a1200;margin-bottom:8px}
.info-list{margin-left:16px}
</style>
</head>
<body>

<!-- BANNER AI -->
<div class="banner" role="banner" aria-hidden="false">
  <div id="aiText" aria-live="polite"></div><div class="cursor" aria-hidden="true"></div>
</div>

<!-- TOP BUTTONS -->
<div class="top-btn" role="toolbar" aria-label="Controls">
  <button onclick="toggleMusic()" title="PhÃ¡t / Táº¯t nháº¡c" aria-label="Play music">ğŸµ</button>
  <button onclick="toggleTheme()" title="Chuyá»ƒn theme" aria-label="Toggle theme">ğŸŒ—</button>
  <button onclick="full()" title="ToÃ n mÃ n hÃ¬nh" aria-label="Fullscreen">â›¶</button>
  <button onclick="changeBg()" title="Äá»•i ná»n" aria-label="Change background">ğŸ–¼ï¸</button>
  <button onclick="showInfo()" title="ThÃ´ng tin & Äiá»u khoáº£n" aria-label="Info">â„¹ï¸</button>
</div>

<!-- VOLUME SLIDER -->
<input id="vol" type="range" min="0" max="100" aria-label="Ã‚m lÆ°á»£ng" />

<!-- HEADER -->
<div class="header">
  <h1>ğŸ‰ Lá»„ Há»˜I GAME Táº¾T 2026 ğŸ‰</h1>
  <div class="countdown" id="countdown" aria-live="polite"></div>
</div>

<!-- MENU GAMES -->
<div class="menu" role="navigation" aria-label="Chá»n trÃ² chÆ¡i">
  <div class="game-card" onclick="goGame('le-hoi-xao-tron-2026/coc.html')">
    <span>ğŸ¥¤</span>
    <h2>3 Cá»C BÃ“NG</h2>
    <p>TrÃ­ nhá»› & pháº£n xáº¡</p>
  </div>

  <div class="game-card" onclick="goGame('le-hoi-caro-2026/caro.html')">
    <span>â™Ÿï¸</span>
    <h2>Cá»œ CARO</h2>
    <p>Äáº¥u trÃ­ chiáº¿n thuáº­t</p>
  </div>
</div>

<!-- INFO POPUP (Version 5.3 + Äiá»u khoáº£n) -->
<div class="popup" id="infoPopup" role="dialog" aria-modal="true" aria-labelledby="infoTitle">
  <div class="box">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div id="infoTitle" class="info-title">ğŸ“¢ ThÃ´ng tin & Äiá»u khoáº£n â€” Version 5.3</div>
        <div style="font-size:13px;color:#333">Cáº­p nháº­t: v5.3</div>
      </div>
      <button onclick="closeInfo()" style="background:#ffd54f;border:none;padding:6px 10px;border-radius:8px;cursor:pointer">ÄÃ³ng</button>
    </div>

    <hr style="margin:8px 0;border:none;border-top:1px solid rgba(0,0,0,0.06)">

    <div style="margin-top:8px">
      <b>Äiá»ƒm ná»•i báº­t (v5.3):</b>
      <ul class="info-list">
        <li>â€¢ Loáº¡i bá» tÃ­nh nÄƒng <b>LÃ¬ xÃ¬</b> â€” chuyá»ƒn sang cÆ¡ cháº¿ Ä‘iá»ƒm & leaderboard chÃ­nh thá»©c trong cÃ¡c báº£n tiáº¿p theo.</li>
        <li>â€¢ Sá»­a lá»—i <b>ToÃ n mÃ n hÃ¬nh</b> â€” hoáº¡t Ä‘á»™ng tá»‘t trÃªn háº§u háº¿t trÃ¬nh duyá»‡t (kÃ¨m rung nháº¹ trÃªn thiáº¿t bá»‹ há»— trá»£).</li>
        <li>â€¢ Tá»‘i Æ°u tráº£i nghiá»‡m mobile & desktop, giá»¯ nguyÃªn hiá»‡u á»©ng hoa mai vÃ  phÃ¡o hoa nháº¹ nhÃ ng.</li>
      </ul>
    </div>

    <div style="margin-top:10px">
      <b>ThÃªm nhiá»u lá»i chÃºc:</b>
      <ul class="info-list" id="moreWishes">
        <!-- filled by JS -->
      </ul>
    </div>

    <div style="margin-top:12px">
      <b>Äiá»u khoáº£n & ChÃ­nh sÃ¡ch ngáº¯n gá»n:</b>
      <ol class="info-list">
        <li><b>HÃ nh vi:</b> KhÃ´ng sá»­ dá»¥ng pháº§n má»m gian láº­n, bot, hoáº·c can thiá»‡p khÃ´ng há»£p lá»‡. Vi pháº¡m cÃ³ thá»ƒ dáº«n tá»›i bá»‹ khÃ³a tÃ i khoáº£n (náº¿u Ã¡p dá»¥ng).</li>
        <li><b>Quyá»n sá»Ÿ há»¯u:</b> Ná»™i dung, hÃ¬nh áº£nh vÃ  Ã¢m thanh trong trang thuá»™c quyá»n quáº£n lÃ½ cá»§a báº¡n / dá»± Ã¡n â€” sá»­ dá»¥ng há»£p phÃ¡p vÃ  tÃ´n trá»ng báº£n quyá»n.</li>
        <li><b>Quyá»n riÃªng tÆ°:</b> á»¨ng dá»¥ng lÆ°u má»™t sá»‘ dá»¯ liá»‡u cá»¥c bá»™ (localStorage) Ä‘á»ƒ giá»¯ UID/ngÆ°á»i chÆ¡i. KhÃ´ng thu tháº­p thÃ´ng tin nháº¡y cáº£m.</li>
        <li><b>TrÃ¡ch nhiá»‡m:</b> Má»¥c Ä‘Ã­ch giáº£i trÃ­; nhÃ  phÃ¡t triá»ƒn khÃ´ng chá»‹u trÃ¡ch nhiá»‡m vá» máº¥t mÃ¡t dá»¯ liá»‡u cÃ¡ nhÃ¢n do chá»‰nh sá»­a/truy cáº­p trÃ¡i phÃ©p.</li>
        <li><b>LiÃªn há»‡ admin:</b> Äá»ƒ quáº£n trá»‹ â€” thÃªm node <code>admins/&lt;yourUid&gt;</code> trong Realtime DB hoáº·c liÃªn há»‡ ngÆ°á»i phÃ¡t triá»ƒn dá»± Ã¡n.</li>
      </ol>
    </div>

    <div style="margin-top:12px;font-size:13px;color:#444">
      <b>Gá»£i Ã½:</b> Muá»‘n tÃ­ch há»£p leaderboard/ghi Ä‘iá»ƒm/táº¯t tÃ­nh nÄƒng nÃ o khÃ¡c â€” mÃ¬nh há»— trá»£ tÃ­ch há»£p Firebase & rules an toÃ n.
    </div>
  </div>
</div>

<!-- EFFECT CANVAS -->
<canvas id="fx" aria-hidden="true"></canvas>

<!-- SOUNDS -->
<audio id="clickSound" src="click.mp3" preload="auto"></audio>
<audio id="bgm" preload="auto" loop><source src="nhac-tet.mp3" type="audio/mpeg"></audio>

<!-- SCRIPT -->
<script>
/* ================= USER & UID ================= */
let uid = localStorage.uid;
if(!uid){
  uid = "u_" + Math.random().toString(36).slice(2,10);
  localStorage.uid = uid;
}
let name = localStorage.playerName || prompt("ğŸŠ Nháº­p tÃªn cá»§a báº¡n:") || "Báº¡n";
localStorage.playerName = name;

/* ================= BACKGROUND IMAGES (random + change button) ================= */
const bgImages = [
  "assets/tet/anh1.jpg",
  "assets/tet/anh2.jpg",
  "assets/tet/anh3.jpg",
  "assets/tet/anh4.jpg",
  "assets/tet/anh5.jpg",
  "assets/tet/anh6.jpg",
];

function setRandomBackground(){
  const url = bgImages[Math.floor(Math.random()*bgImages.length)];
  document.body.style.backgroundImage = `linear-gradient(rgba(0,0,0,.35),rgba(0,0,0,.55)), url("${url}")`;
  document.body.style.backgroundSize = 'cover';
  document.body.style.backgroundPosition = 'center';
}
function changeBg(){
  setRandomBackground();
  toast("ğŸ–¼ï¸ ÄÃ£ Ä‘á»•i giao diá»‡n ná»n");
}
setRandomBackground(); // initial

/* ================= MUSIC / VOLUME ================= */
const bgm = document.getElementById('bgm');
const volEl = document.getElementById('vol');
const clickSound = document.getElementById('clickSound');
let musicOn = localStorage.music === 'on';
bgm.volume = localStorage.vol ? +localStorage.vol : 0.7;
volEl.value = Math.round(bgm.volume * 100);

function startMusic(){
  if (musicOn) bgm.play().catch(()=>{});
  document.removeEventListener('click', startMusic);
  document.removeEventListener('touchstart', startMusic);
}
document.addEventListener('click', startMusic);
document.addEventListener('touchstart', startMusic);

function toggleMusic(){
  musicOn = !musicOn;
  localStorage.music = musicOn ? 'on' : 'off';
  musicOn ? bgm.play().catch(()=>{}) : bgm.pause();
}
volEl.addEventListener('input', ()=> {
  bgm.volume = volEl.value / 100;
  localStorage.vol = bgm.volume;
});

/* ================= THEME ================= */
function toggleTheme(){
  document.body.classList.toggle('light');
  if(document.body.classList.contains('light')){
    document.body.style.backgroundBlendMode = 'normal';
    document.body.style.background = 'linear-gradient(#fff7e6,#ffd180)';
    document.body.style.color = '#600';
  } else {
    // restore image overlay (keeps last chosen image)
    setRandomBackground(); // choose new image for clarity
    document.body.style.color = '#fff';
  }
}

/* ================= FULLSCREEN + VIBRATION (fix v5.3) ================= */
function full(){
  const el = document.documentElement;
  const isFull = document.fullscreenElement || document.webkitFullscreenElement || false;
  // Try to vibrate briefly when toggling (mobile)
  try{ if(navigator.vibrate) navigator.vibrate(30); } catch(e){}
  if(!isFull){
    if(el.requestFullscreen) el.requestFullscreen();
    else if(el.webkitRequestFullscreen) el.webkitRequestFullscreen();
    else if(el.msRequestFullscreen) el.msRequestFullscreen();
  } else {
    if(document.exitFullscreen) document.exitFullscreen();
    else if(document.webkitExitFullscreen) document.webkitExitFullscreen();
  }
}

/* ================= NAVIGATE TO GAME ================= */
function clickSoundPlay(){ if(clickSound){ clickSound.currentTime = 0; clickSound.play().catch(()=>{}); } }
function goGame(url){
  clickSoundPlay();
  toast('ğŸ® Äang vÃ o game...');
  setTimeout(()=> location.href = url, 600);
}

/* ================= TOAST ================= */
function toast(msg){
  const t = document.createElement('div');
  t.className = 'toast';
  t.innerText = msg;
  document.body.appendChild(t);
  setTimeout(()=> t.remove(), 2600);
}

/* ================= BANNER AI TYPEWRITER (má»Ÿ rá»™ng nhiá»u lá»i chÃºc) ================= */
const wishes = [
  `ğŸ‰ ChÃºc ${localStorage.playerName||'báº¡n'} nÄƒm má»›i an khang â€“ phÃ¡t tÃ i ğŸ§§`,
  "ğŸŒ¸ XuÃ¢n sang váº¡n sá»± nhÆ° Ã½, sá»©c khoáº» dá»“i dÃ o",
  "ğŸ”¥ NÄƒm má»›i tháº¯ng lá»›n, lá»™c Ä‘áº¿n Ä‘áº§y nhÃ ",
  "ğŸ® ChÆ¡i game vui váº» â€” khÃ´ng cÄƒng tháº³ng, tháº¯ng hay thua Ä‘á»u vui",
  "ğŸ’« TÃ¢m an, thÃ¢n khá»e, há»c hÃ nh tiáº¿n bá»™, cÃ´ng viá»‡c thuáº­n lá»£i",
  "ğŸŠ LÃ¬ xÃ¬ chÃºc phÃºc (Ä‘Ã£ chuyá»ƒn sang cÆ¡ cháº¿ Ä‘iá»ƒm trong phiÃªn báº£n má»›i)",
  "ğŸŒ± Hy vá»ng má»›i, cÆ¡ há»™i má»›i, may máº¯n luÃ´n bÃªn báº¡n",
  "â­ ChÃºc báº¡n Ä‘áº¡t nhiá»u thÃ nh tÃ­ch trong game & cuá»™c sá»‘ng",
  "ğŸ† Cáº§u mong má»™t nÄƒm hÃ²a thuáº­n, bÃ¬nh an, trÃ n Ä‘áº§y tiáº¿ng cÆ°á»i",
  "ğŸ§¡ YÃªu thÆ°Æ¡ng, sáº» chia vÃ  nhiá»u ká»· niá»‡m Ä‘áº¹p bÃªn gia Ä‘Ã¬nh"
];
let wi = 0, ci = 0, el = document.getElementById('aiText');
(function type(){
  if(ci < wishes[wi].length){
    el.textContent += wishes[wi][ci++];
    setTimeout(type, 40);
  } else {
    setTimeout(()=>{ el.textContent = ''; ci = 0; wi = (wi+1) % wishes.length; type(); }, 2200);
  }
})();

/* ================= COUNTDOWN ================= */
const cd = document.getElementById('countdown');
setInterval(()=> {
  const t = new Date("2026-02-17T00:00:00") - new Date();
  if(t > 0){
    const days = Math.floor(t / 86400000);
    const hours = Math.floor((t % 86400000) / 3600000);
    cd.innerText = `â³ CÃ²n ${days} ngÃ y ${hours} giá» tá»›i Táº¿t`;
  } else {
    cd.innerText = "ğŸ† ChÃºc má»«ng nÄƒm má»›i!";
  }
}, 1000);

/* ================= PARTICLES VISUAL ================= */
const canvas = document.getElementById('fx');
const ctx = canvas.getContext('2d');
let particles = [];
function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
window.addEventListener('resize', resize);
resize();
setInterval(()=> {
  particles.push({ x: Math.random()*canvas.width, y: canvas.height + 10, r: Math.random()*3+2, vx: (Math.random()-0.5)*1.5, vy: -2-Math.random()*2, life: 300 });
}, 220);

(function anim(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach((p, i) => {
    ctx.fillStyle = "rgba(255,215,0,0.95)";
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.02;
    p.life--;
  });
  particles = particles.filter(p => p.life > 0 && p.y > -50);
  requestAnimationFrame(anim);
})();

/* ================= INFO POPUP: thÃªm nhiá»u lá»i chÃºc vÃ o danh sÃ¡ch ================= */
function showInfo(){ 
  const list = document.getElementById('moreWishes');
  if(list && list.children.length === 0){
    const extras = [
      "An khang thá»‹nh vÆ°á»£ng, tiá»n vÃ´ nhÆ° nÆ°á»›c.",
      "Gáº·p may máº¯n trong má»i quyáº¿t Ä‘á»‹nh, bÃ¬nh an trong má»—i ngÃ y.",
      "Gia Ä‘Ã¬nh áº¥m no, báº¡n bÃ¨ thÃ¢n máº­t, niá»m vui dÃ i lÃ¢u.",
      "Há»c táº­p tiáº¿n bá»™, thi cá»­ thÃ nh cÃ´ng, thÄƒng tiáº¿n cÃ´ng viá»‡c.",
      "TÃ¢m sÃ¡ng, lÃ²ng hiá»n, má»i thá»© hanh thÃ´ng.",
      "ChÃºc báº¡n cÃ³ nhá»¯ng tráº£i nghiá»‡m má»›i tuyá»‡t vá»i trong nÄƒm tá»›i."
    ];
    extras.forEach(t=>{
      const li = document.createElement('li');
      li.textContent = t;
      list.appendChild(li);
    });
  }
  document.getElementById('infoPopup').style.display = 'flex'; 
}
function closeInfo(){ document.getElementById('infoPopup').style.display = 'none'; }

</script>

</body>
</html>
